{% extends "layout.html" %}
{% block content %}
    <h1>Users</h1>
    <div class="users-list">
        {% for user in users.items %}
        <div class="user">
            <a href="{{ url_for('users.user_profile', username=user.username )}}">
                <img src="static/pics/{{ user.image_file }}" alt="Profile Picture">
            </a>
            <div class="user-info">
                <div>
                    <a href="{{ url_for('users.user_profile', username=user.username )}}">
                        <h2>{{ user.username }}</h2>
                    </a>
                    <p>{{ datemember(user.date_joined)}}</p>
                    <p>Karma: {{ user.karma }}</p>
                </div>
            </div>
        </div>
        {% endfor %}

        <!-- Pagination -->
        {% if users.has_prev %}
        <a href="?page={{ users.prev_num }}">Previous</a>
        {% endif %}

        {% for page_num in users.iter_pages() %}
        {% if page_num %}
            {% if users.page == page_num %}
            <span class="current-page">{{ page_num }}</span>
            {% else %}
            <a href="?page={{ page_num }}">{{ page_num }}</a>
            {% endif %}
        {% else %}
            <span class="ellipsis">...</span>
        {% endif %}
        {% endfor %}

        {% if users.has_next %}
        <a href="?page={{ users.next_num }}">Next</a>
        {% endif %}
    </div>
{% endblock content %}